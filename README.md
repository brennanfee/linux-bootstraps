# linux-bootstraps

Repository with shell scripts to bootstrap installations of various Linux distributions.

## Overview

These scripts are various ways to automate much of the installation of various Linux distributions.

The primary purpose for this repo is a set of shell scripts that mimic the "Arch Way" of installing things for both Debian and Ubuntu distributions (and possibly some day, derivatives of those).  Arch is (or will be) supported as well, for those who wish to use that instead.  These "Arch Way" scripts support far more complex and customizable scenarios then is possible with cloud-init or pre-seed environments, yet still maintain the ability to be fully automated.  Frankly, I went down this path simply because the default installers provided by the distributions are just not flexible enough or are far too complex to work with, especially in their automated variations.

Also available in this project are cloud-init and pre-seed files for the standard Debian and Ubuntu installers.  However, they are less flexible and are largely intended for virtualized workloads that have fewer demands on partition layouts and various other advanced settings and situations.  For instance, encryption is not supported by these installer variants.  However, despite the limitations of the base installers I have supported the ability to customize the installation in various ways as best as I could.

As much as is possible I try and ensure that both sets of installers produce the same end result (should they be given the same configuration settings).

## Warning

The goal of these scripts is **NOT** to provide a fully baked server or desktop environment but instead to do the early heavy lifting so that the things that are otherwise difficult to modify after initial installation of Linux are baked in "correctly".  Such as disk partitioning, encryption, UEFI\BIOS configuration, desired kernel and other basics.

**NOTE:** It is fully expected that after initial boot, further (ideally automated) installations and configurations **will be required**.

This is especially true for security and encryption.  For instance, the default encryption key to use is an autogenerated file.  This allows the root volume to be encrypted yet still preserves the ability to automatically boot during the setup and configuration process.  However, this obviously defeats the purpose of securing the disk as anyone booting the system would be let in.  It is **FULLY EXPECTED** that the user will, during further system configuration, modify the encryption keys and or setup to provide a secure encryption footprint.

## Automation

The primary goal of these bootstrap scripts is to support numerous setup scenarios while still being able to be fully automated (such as with Packer).  To keep things simpler we don't support EVERY possible variation but instead start from a place of what "should" be most common in the current standards of Linux but offer options for things that truly may be separate desired configurations.

As one example, there is no configuration option for how swap is set up.  This installer does not support swap partitions because using a swap file is just easier and allows greater flexibility.  The use of swap files over partitions has become quite common in the Linux community and as such it is the only option provided in this installer.

While the scripts work just fine on "bare metal" installations, it is especially excellent with PXE network booting installations as well as with tools like [FAI](https://fai-project.org/) or [Packer](https://www.packer.io/).  In fact, you can view my companion repo [brennanfee/packer-linux](https://github.com/brennanfee/packer-linux) which demonstrates using these scripts within packer to build various machine images.

### Arch-Way Installers

Generally, these scripts expect you to be at a prompt of a live installer (similar to Arch).  Both Debian and Ubuntu provide live server images that provide exactly this.  From the prompt you can set some environment variables to customize the installation, as needed, and then download and run the install script.  The install script will read the environment variables and behave accordingly.  Defaults are provided for every option so if you like your setup exactly like I do you can just run the script straight away without setting any variables.

Another option is to create a "configuration file" or "configuration script".  This would be a script that sets the environment variables that you desire and then downloads and calls the installer.  The interactive version of the install script can produce these configuration scripts for you.  This is an especially good method if you have a number of machines that all need to be set up with the same configuration settings.

For full documentation on the Debian/Ubuntu scripted installer, see:  [Debian Scripted Installer](docs/debian-scripted-installer.md)

For full documentation on the Debian/Ubuntu interactive installer, see: [Debian Interactive Installer](docs/debian-interactive-installer.md)

For full documentation on the Arch scripted installer, see:  TBD

For full documentation on the Arch interactive installer, see: TBD

### Cloud-init And Pre-seeds

For cloud-init and pre-seeds, the automation is done by passing variables onto the linux boot command (which is generally how you get a pre-seed installations to "go" anyway).  We simply add in some extra values you can pass that will adjust your results.

While these configurations are entirely usable as is, they are meant to be used as templates where you might copy them and modify them to your own, similar to producing "configuration scripts" for the scripted installer.

**NOTE**: The pre-seed should be seen as legacy and/or deprecated.  Cloud-init and its system do seem to be the path forward as it supports many different Linux distributions both in actual clouds and for on-premises scenario's.

For full documentation on Ubuntu cloud-init, see: [Ubuntu Cloud-Init](docs/cloud-init/ubuntu-cloud-init.md)

For full documentation on Debian cloud-init, see: [Debian Cloud-Init](docs/cloud-init/debian-cloud-init.md)

For full documentation on Debian pre-seed, see: [Debian Pre-Seed](docs/cloud-init/debian-preseed.md)

## License

[MIT](license.md) Â© 2021 [Brennan Fee](https://github.com/brennanfee)
